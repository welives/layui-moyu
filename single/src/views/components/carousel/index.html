<div class="layui-card layadmin-breadcrumb">
  <div class="layui-breadcrumb" lay-filter="LAY-filter-breadcrumb">
    <a lay-href="">主页</a>
    <a><cite>组件</cite></a>
    <a><cite>轮播</cite></a>
  </div>
</div>

<style>
  div[carousel-item] > * {
    text-align: center;
    line-height: 280px;
    color: #666666;
  }
  div[carousel-item] > *:nth-child(2n) {
    background-color: #e2e2e2;
  }
  div[carousel-item] > *:nth-child(2n + 1) {
    background-color: #eee;
  }
  #LAY-id-carousel-normal-2 div[carousel-item] > * {
    line-height: 120px;
  }
</style>

<div class="layui-fluid">
  <div class="layui-row layui-col-space10">
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-header">常规轮播</div>
        <div class="layui-card-body">
          <div class="layui-carousel" id="LAY-id-carousel-normal-1" lay-filter="LAY-filter-carousel-normal-1">
            <div carousel-item>
              <div>条目1</div>
              <div>条目2</div>
              <div>条目3</div>
              <div>条目4</div>
              <div>条目5</div>
            </div>
          </div>
          <div
            class="layui-carousel"
            id="LAY-id-carousel-normal-2"
            lay-filter="LAY-filter-carousel-normal-2"
            style="margin-top: 15px;"
          >
            <div carousel-item>
              <div>条目1</div>
              <div>条目2</div>
            </div>
          </div>
        </div>
      </div>
      <div class="layui-card">
        <div class="layui-card-header">设定各种参数</div>
        <div class="layui-card-body">
          <div class="layui-form" lay-filter="LAY-filter-carousel-form">
            <div class="layui-form-item">
              <label class="layui-form-label">宽高</label>
              <div class="layui-input-inline" style="width: 98px;">
                <input
                  type="tel"
                  class="layui-input LAY-carousel-set"
                  name="width"
                  value="600"
                  autocomplete="off"
                  placeholder="width"
                />
              </div>
              <div class="layui-input-inline" style="width: 98px;">
                <input
                  type="tel"
                  class="layui-input LAY-carousel-set"
                  name="height"
                  value="280"
                  autocomplete="off"
                  placeholder="height"
                />
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">动画类型</label>
              <div class="layui-input-block">
                <div class="layui-btn-group LAY-carousel-params" style="margin-top: 5px;">
                  <button
                    class="layui-btn layui-btn-sm"
                    style="background-color: #42b983;"
                    data-type="set"
                    data-key="anim"
                    data-value="default"
                  >
                    左右切换
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="anim" data-value="updown">
                    上下切换
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="anim" data-value="fade">
                    渐隐渐显
                  </button>
                </div>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">箭头状态</label>
              <div class="layui-input-block">
                <div class="layui-btn-group LAY-carousel-params" style="margin-top: 5px;">
                  <button
                    class="layui-btn layui-btn-sm"
                    style="background-color: #42b983;"
                    data-type="set"
                    data-key="arrow"
                    data-value="hover"
                  >
                    悬停显示
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="arrow" data-value="always">
                    始终显示
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="arrow" data-value="none">
                    不显示
                  </button>
                </div>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">指示器位置</label>
              <div class="layui-input-block">
                <div class="layui-btn-group LAY-carousel-params" style="margin-top: 5px;">
                  <button
                    class="layui-btn layui-btn-sm"
                    style="background-color: #42b983;"
                    data-type="set"
                    data-key="indicator"
                    data-value="inside"
                  >
                    容器内部
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="indicator" data-value="outside">
                    容器外部
                  </button>
                  <button class="layui-btn layui-btn-sm" data-type="set" data-key="indicator" data-value="none">
                    不显示
                  </button>
                </div>
              </div>
            </div>
            <div class="layui-form-item">
              <div class="layui-inline">
                <label class="layui-form-label">自动切换</label>
                <div class="layui-input-block">
                  <input
                    type="checkbox"
                    class="layui-input"
                    name="switch"
                    lay-skin="switch"
                    lay-text="ON|OFF"
                    lay-filter="LAY-filter-carousel-autoplay"
                    checked
                  />
                </div>
              </div>
              <div class="layui-inline">
                <label class="layui-form-label">时间间隔</label>
                <div class="layui-input-block">
                  <input
                    type="tel"
                    class="layui-input LAY-carousel-set"
                    name="interval"
                    value="3000"
                    autocomplete="off"
                    placeholder="毫秒"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="layui-carousel" id="LAY-id-carousel-params" lay-filter="LAY-filter-carousel-params">
            <div carousel-item>
              <div>条目1</div>
              <div>条目2</div>
              <div>条目3</div>
              <div>条目4</div>
              <div>条目5</div>
            </div>
          </div>
        </div>
      </div>
      <div class="layui-card">
        <div class="layui-card-header">填充轮播元素 - 以图片为例</div>
        <div class="layui-card-body">
          <div class="layui-carousel" id="LAY-id-carousel-img">
            <script
              type="text/html"
              template
              lay-url="{{ layui.setter.api }}json/carousel/img.json"
              lay-done="imgCarousel()"
            >
              <div carousel-item>
                {{# layui.each(d.data, (index, item)=>{ }}
                  <div>
                    <img src="{{ layui.setter.api }}{{ item.src }}" alt="" />
                  </div>
                  {{# }) }}
                </div>
            </script>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  // 图片轮播
  function imgCarousel() {
    layui.use('carousel', () => {
      let carousel = layui.carousel
      carousel.render({
        elem: '#LAY-id-carousel-img',
        height: '340px',
        interval: 3000,
      })
    })
  }

  layui.use(['carousel', 'form'], () => {
    let $ = layui.$,
      form = layui.form,
      carousel = layui.carousel

    // 常规轮播
    carousel.render({
      elem: '#LAY-id-carousel-normal-1',
      arrow: 'always',
    })
    // 改变下时间间隔、动画类型、高度
    carousel.render({
      elem: '#LAY-id-carousel-normal-2',
      interval: 1800,
      anim: 'fade',
      height: '120px',
    })
    // 设定各种参数
    let ins = carousel.render({
      elem: '#LAY-id-carousel-params',
    })

    // 事件
    carousel.on('change(LAY-filter-carousel-params)', (res) => {
      console.log(res)
    })

    let event = {
      set(othis) {
        let key = othis.data('key'),
          options = {}

        othis.css('background-color', '#42b983').siblings().removeAttr('style')
        options[key] = othis.data('value')
        ins.reload(options)
      },
    }

    // 监听开关
    form.on('switch(LAY-filter-carousel-autoplay)', function () {
      ins.reload({
        autoplay: this.checked,
      })
    })

    $('.LAY-carousel-set').on('keyup', function () {
      let value = this.value,
        options = {}
      if (!/^\d+$/.test(value)) return

      options[this.name] = value
      ins.reload(options)
    })

    $('.LAY-carousel-params .layui-btn').on('click', function () {
      let type = $(this).data('type')
      event[type] && event[type].call(this, $(this))
    })
  })
</script>
